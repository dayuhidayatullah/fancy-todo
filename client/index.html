<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Todo Apps</title>
    <link rel="stylesheet" href="assets/style.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    
</head>
<body>
    <!-- main page 1-->
    <div class="d-flex justify-content-left" id="main-page1">
        <nav class="navbar navbar-expand-sm bg-ligth navbar-ligth">
            <ul class="navbar-nav">
                <li>
                    <a class= "nav-link text-muted" href="#" > Fancy Todo</a>
                </li>
                <li>
                    <a class="nav-link text-muted" href="#" id="btn-profile"> Profile</a>
                </li>
                <li>
                    <a class="nav-link text-muted" href="#" id="btn-logout" onclick="logout()" > Log Out</a>
                </li>
            </ul>
        </nav>
        
    </div>
        <!-- Register--> 
            <div class="container" id="register-page">
                <h2> Register </h2> 
                <form class= "was-valiated" id="register-form">
                    <div class="form-group">
                        <label for="email"> Email </label>
                        <input type="email" id="email-regis" class="form-control" placeholder="Enter Email" name="email" required>
                        <div class="valid-feedback"> Valid </div>
                        <div class="invalid-feedback"> Please fill out this field</div>
                    </div>
                    <div class="form-group">
                        <label for="password"> Password</label>
                        <input type="password" id="password-regis" class="form-control" placeholder="Enter password" name="password" required > 
                        <div class="valid-feedback"> Valid </div>
                        <div class="invalid-feedback"> Please fill out this field</div>
                    </div>
                    <button id="regis-submit" class="btn btn-primary"> Submit</button>
                </form>
            </div>

    <!-- Login--> 
    <div class="container" id="login-page">
        <h2> Login </h2> 
        <form class= "was-validated" id="login-form">
            <div class='form-group'>
                <label for="email"> Email </label>
                <input type="email" id="email-login" class="form-control" placeholder="Enter Email" name="email" required>
                <div class="valid-feedback"> Valid </div>
                <div class="invalid-feedback"> Please fill out this field</div>
            </div>
            <div class="form-group">
                <label for="password"> Password</label>
                <input type="password" id="password-login" class="form-control" placeholder="Enter password" name="password" required > 
                <div class="valid-feedback"> Valid </div>
                <div class="invalid-feedback"> Please fill out this field</div>
            </div>
            <button id="login-submit" class="btn btn-primary"> Submit</button>
            <button id="register" class="btn btn-success" onclick="registerPage()"> I havent acount</button>
        </form>
    </div>

    <!-- main page 2 -->
    <div>
        <div id="todo-list" class="container jumbotron text-center" id= "list-todo" style>
            <h1> Your Todos</h1>
            <p> fancy todo is an application to organize your daily life so that you can focus on only the important tasks, and you can use this app to manage shopping lists, make lesson notes or monthly expenses.
            </p>
            <div class="card">
                <div class="card-body">
                    <h5 class="card-title"> sda</h5>
                    <h6 class="card-date"> sda</h6>
                </div>  
            </div>
                     
        
        </div>
        

    </div>

    
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script> 
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script> -->
    <script>
        function showLoginPage(){
            $("#login-page").show()
            $("#register-page").hide()
            $("#todo-list").hide()
            $("#btn-logout").hide()
            $("#btn-profile").hide()
        }
        function showMainPage(){
            $("#login-page").hide()
            $("#register-page").hide()
            $("#todo-list").show()
            $("#btn-logout").show()
            $("#btn-profile").show()

        }
        function registerPage(){
            $("#login-page").hide()
            $("#register-page").show()
            $("#todo-list").hide()
            $("#btn-logout").hide()
            $("#btn-profile").hide()
        }
        function login(){
            const email = $("#email-login").val()
                const password = $("#password-login").val()
                $.ajax({
                    method: "POST",
                    url: "http://localhost:3000/login",
                    data: {
                        email,
                        password
                    }
                })
                .done(response => {
                    console.log(response)
                    localStorage.setItem('access_token', response.access_token)
                    showMainPage( )
                })
                .fail((xhr, textStatus) => {
                    console.log(textStatus)
                })
        }
        function editUser() {
            
        }
        function logout(){
            localStorage.clear()
            showLoginPage()

        }

        function editTodo(){

        }
        function deleteTodo(){

        }
        $(document).ready(function () {
            showLoginPage()
            $("#login-form").on("submit", function(event){
                event.preventDefault()
                login()
            })
            $("#register-form").on("submit", function(event) {
                event.preventDefault()
                const email = $("#email-regis").val
                const password = $("#password-regis").val()
                $.ajax({
                    method: "POST",
                    url: "http://localhost:3000/register",
                    data: {
                        email,
                        password
                    }
                })
                .done(response => {
                    console.log(response)
                    showLoginPage()
                })
                .fail((xhr, textStatus) => {
                    console.log(textStatus)
                })
            })
            $("#btn-logout").on("click", function() {
                logout()
            })
            $("#btn-profile").on("click", function(){

            })

        })

    </script>
</body>
</html>